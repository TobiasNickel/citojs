!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():e.cito=n()}(this,function(){"use strict";function e(e){return"string"==typeof e}function n(e){return e instanceof Array}function t(e){return"function"==typeof e}function r(e,n){var t=typeof e;return"string"===t?e={t:"#",children:e}:"function"===t&&(e=e(n),e=void 0===e?n:r(e,n)),e}function i(e,n,t){var i=r(n,t);return n!==i&&e&&(e.c=i),i}function o(e,n,t){var r=i(null,l(e,n));return r.dom||(r.dom=t.firstChild,"<"===r.t&&(r.domLength=t.childNodes.length)),r}function a(e,n,t){var i=e[n],o=r(i,t);return i!==o&&(e[n]=o),o}function f(e,n,r){return t(n)&&(n=n(r),void 0===n&&(n=r),e.c=n),n}function l(e,n){return 1===n?e[0]:e}function d(e,n,t){var r,i=n.dom,o=n.domLength||1,a=t&&t.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function s(){return Y.createTextNode("")}function u(e,n,t){if(e.insertAdjacentHTML){var r,i,o;if(U||X){var a="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;a&&3===a.nodeType&&(r=a,X&&0===a.length&&(o=!0,a.nodeValue=" "),U&&(i=a.length))}e.insertAdjacentHTML(n,t),r&&(U&&r.length!==i&&r.splitText(i),X&&o&&(r.nodeValue=""))}else if(oe.innerHTML=t,"beforebegin"===n)for(var f=e.parentNode;oe.firstChild;)f.insertBefore(oe.firstChild,e);else if("beforeend"===n)for(;oe.firstChild;)e.appendChild(oe.firstChild)}function c(e,n,t,r){if(t){var i=t.dom;if(r){var o=t.domLength||1;1===o?(z(t),e.replaceChild(n,i)):(e.insertBefore(n,i),I(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function v(e,n,t,r,i,o){if(ie)return m(e,n,r,i);var a,f=e.t,l=e.c;switch(f){case void 0:return k(e,l,n,t,r,i);case"#":if(o)return void P(n,l);a=Y.createTextNode(l);break;case"!":a=Y.createComment(l);break;case"<":if(l){if(o)n.innerHTML=l;else{var d=n.childNodes,v=d.length;if(r){var g=r.dom,p=g.previousSibling;u(g,"beforebegin",l),a=p?p.nextSibling:n.firstChild}else u(n,"beforeend",l),a=d[v];e.dom=a,e.domLength=d.length-v,i&&r&&I(n,r)}return}a=s();break;default:var b;switch(f){case"svg":b="http://www.w3.org/2000/svg";break;case"math":b="http://www.w3.org/1998/Math/MathML";break;default:b=t}var x=e.a,y=x&&x.is;b?(e.ns=b,a=y?Y.createElementNS(b,f,y):Y.createElementNS(b,f)):a=y?Y.createElement(f,y):Y.createElement(f),e.dom=a,ie&&n&&c(n,a,r,i),"string"==typeof l?P(a,l,!1):V(a,e,b,l,!1),x&&L(a,f,b,x);var C=e.events;C&&N(a,e,C),!ie&&n&&c(n,a,r,i);var w=C&&C.$created;return void(w&&h(w,"$created",a,e))}e.dom=a,n&&c(n,a,r,i)}function h(e,t,r,i,o,a){var f={type:t,target:r,virtualNode:i};if(o&&(f[o]=a),n(e)){for(var l=0;l<e.length;l++)if(e[l].call(r,f)===!1)return}else e.call(r,f)}function m(e,n,t,r){var i,o=g(e);if(n){var a;t||n.hasChildNodes()?(t?(a=t.dom.previousSibling,u(t.dom,"beforebegin",o),r&&I(n,t)):(a=n.lastChild,u(n,"beforeend",o)),i=a?a.nextSibling:n.firstChild):(n.innerHTML=o,i=n.firstChild)}else oe.innerHTML=o,i=oe.removeChild(oe.firstChild);p(i,e)}function g(n,t){var r=n.t,o=n.c;switch(r){case"#":return x(o)+ue;case"!":return"<!--"+y(o)+"-->";case"<":return o+ue;default:var d;if(r){var s=n.a;if("select"===r&&s?t={selectedIndex:s.selectedIndex,value:s.value,optionIndex:0}:"option"===r&&t&&((t.value&&t.value===s.value||void 0!==t.selectedIndex&&t.selectedIndex===t.optionIndex)&&(s.selected=!0),t.optionIndex++),d="<"+r,s){d+=" ";for(var u in s){var c=s[u];if(c!==!1&&("select"!==r||"value"!==u&&"selectedIndex"!==u))if("textarea"!==r||"value"!==u){if(c===!0)c="";else if("style"===u&&!e(c)){var v="";for(var h in c)v+=h+": "+c[h]+"; ";c=v}d+=" "+C(u,c)}else o=c}}}else d="";r&&(d+=">"),o=f(n,o);var m=j(o);if(m>1)for(var p=0,b=o.length;p<b;p++)d+=g(a(o,p),t);else if(0!==m){var k=l(o,m);e(k)?(d+=x(k),r&&k||(d+=ue)):d+=g(i(n,k),t)}else r||(d+=ue);return r&&(d+="</"+r+">"),d}}function p(n,t){var r=t.t;if(r){t.dom=n;var i,o;switch(r){case"#":i=n.nodeValue,o=i.indexOf(ue),o!==-1&&(o+1<i.length&&n.splitText(o+1),n.nodeValue=i.substr(0,o));break;case"!":break;case"<":for(var a,f=0;n;n=n.nextSibling)if(f++,3===n.nodeType){if(i=n.nodeValue,f>1&&i===ue){a=n.nextSibling,n.parentNode.removeChild(n),f--;break}if(o=i.indexOf(ue),o!==-1){o+1<i.length&&n.splitText(o+1),n.nodeValue=i.substr(0,o),a=n.nextSibling;break}}return t.domLength=f,a;default:var d=t.c,s=j(d);if(s>1){d=t.c;for(var u=n.firstChild,c=0,v=d.length;c<v;c++)u=p(u,d[c])}else if(0!==s){var m=l(d,s);e(m)?m||(n.firstChild.nodeValue=""):p(n.firstChild,m)}var g=t.events;if(g){N(n,t,g);var x=g.$created;x&&h(x,"$created",n,t)}}return n.nextSibling}return b(n,t)}function b(e,n){var t,r=n.c,o=j(r);if(0===o)e.length>1&&e.splitText(1),e.nodeValue="",n.dom=e,t=e.nextSibling;else{if(o>1){t=e;for(var a=0;a<r.length;a++)t=p(t,r[a]);e=r[0].dom}else{var f=i(n,l(r,o));t=p(e,f),e=f.dom}n.dom=e;for(var d=0;e!==t;)d++,e=e.nextSibling;n.domLength=d}return t}function x(e){return e=""+e,te?(oe.innerText=e,e=oe.innerHTML):e=re?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function y(e){return e=""+e,e.replace(/-{2,}/g,"-")}function C(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=re?n.split("&").join("&amp;").split('"').join("&quot;"):n.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+n+'"'}function k(e,n,t,r,o,d){n=f(e,n);var u,h,m,g=j(n);if(r&&(e.ns=r),0===g)u=s(),c(t,u,o,d);else if(g>1){h=0;for(var p=0,b=n.length;p<b;p++)m=a(n,p),v(m,t,r,o,!1),h+=m.domLength||1;u=n[0].dom,d&&I(t,o)}else m=i(e,l(n,g)),v(m,t,r,o,d),u=m.dom,h=m.domLength;e.dom=u,e.domLength=h}function L(e,n,t,r,i,o){var a,f;if(r)for(f in r){var l=!1,d=r[f];if("style"===f){var s=i&&i[f];s!==d&&(l=T(e,s,r,d))}else S(n,f)?e[f]!==d&&(e[f]=d,l=!0):i&&i[f]===d||("class"!==f||t?w(e,f,d):e.className=d,l=!0);l&&o&&(a||(a=[])).push(f)}if(i)for(f in i)r&&void 0!==r[f]||("class"!==f||t?S(n,f)||e.removeAttribute(f):e.className="",o&&(a||(a=[])).push(f));return a}function w(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(i!==-1){var o=n.substr(0,i);switch(o){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function T(n,t,r,i){var o,a=!1;if(!e(i)&&(!de||!t||e(t))){var f="";if(i)for(o in i)f+=o+": "+i[o]+"; ";i=f,de||(r.style=i)}var l=n.style;if(e(i))l.cssText=i,a=!0;else{if(i)for(o in i){var d=i[o];if(!t||t[o]!==d){var s=d.indexOf("!important");if(s!==-1)l.setProperty(o,d.substr(0,s),"important");else{if(t){var u=t[o];u&&u.indexOf("!important")!==-1&&l.removeProperty(o)}l.setProperty(o,d,"")}a=!0}}if(t)for(o in t)i&&void 0!==i[o]||(l.removeProperty(o),a=!0)}return a}function N(e,n,t,r){var i;if(t){e.virtualNode=n;for(i in t)r&&r[i]||E(e,i)}if(r)for(i in r)t&&t[i]||M(e,i)}function S(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function E(e,n){if("$"!==n[0])if(fe)e.addEventListener(n,O,!1);else{var t="on"+n;t in e?e[t]=O:e.attachEvent(t,O)}}function M(e,n){if("$"!==n[0])if(fe)e.removeEventListener(n,O,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,O)}}function V(n,t,r,o,d){o=f(t,o);var s=j(o);if(s>1)for(var u=0,c=o.length;u<c;u++)v(a(o,u),n,r);else if(0!==s){var h=l(o,s);!d&&e(h)?P(n,h):(h=i(t,h),v(h,n,r,null,!1,!d))}}function j(t){return n(t)?t.length:t||e(t)?-1:0}function A(n,t,r){r>1?H(n,t,0,t.length):0!==r&&(e(t)?n.removeChild(n.firstChild):I(n,o(t,r,n)))}function H(e,n,t,r){for(;t<r;t++)I(e,n[t])}function I(e,n){z(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function P(e,n,t){if(n)ae?e.textContent=n:e.innerText=n;else{if(t)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(s())}}function $(n,t,r,s,u,c,h){var m;if(u=f(t,u,s),u!==s){var g=j(s);if(0===g)return void V(n,t,r,u,!1);var p,b,x=j(u);if(0===x)return void A(n,s,g);if(x<2){if(b=l(u,x),!c&&e(b)){if(x===g){if(p=l(s,g),b===p)return;if(e(p))return void(n.firstChild.nodeValue=b)}return G(s,g),void P(n,b,!0)}if(g<2)return p=o(s,g,n),b=i(t,b,p),void K(p,b,n,r,null,0,h,!c)}x===-1&&(t.c=u=[u]),g<2&&(p=o(s,g,n),1===g?s[0]=p:s=[p]);var y,C=s.length,k=u.length,L=C-1,w=u.length-1,T=0,N=0,S=!0;e:for(;S&&T<=L&&N<=w;){S=!1;var E,M,$,O;for(E=s[T],$=a(u,N,E);E.key===$.key;){if(K(E,$,n,r,s,T+1,h),T++,N++,T>L||N>w)break e;E=s[T],$=a(u,N,E),S=!0}for(M=s[L],O=a(u,w);M.key===O.key;){if(K(M,O,n,r,u,w+1,h),L--,w--,T>L||N>w)break e;M=s[L],O=a(u,w),S=!0}for(;E.key===O.key;){if(y=w+1<k?u[w+1]:h,K(E,O,n,r,null,0,y),d(n,O,y),T++,w--,T>L||N>w)break e;E=s[T],O=a(u,w),S=!0}for(;M.key===$.key;){if(y=T<C?s[T]:h,K(M,$,n,r,null,0,y),d(n,$,y),L--,N++,T>L||N>w)break e;M=s[L],$=a(u,N),S=!0}}if(T>L)for(y=w+1<k?a(u,w+1):h,m=N;m<=w;m++)v(a(u,m),n,r,y);else if(N>w)H(n,s,T,L+1);else{var B=s[L+1],D={};for(m=L;m>=T;m--)p=s[m],p.next=B,D[p.key]=p,B=p;for(y=w+1<k?a(u,w+1):h,m=w;m>=N;m--){b=u[m];var q=b.key;p=D[q],p?(D[q]=null,B=p.next,K(p,b,n,r,null,0,y),n.nextSibling!=(y&&y.dom)&&d(n,b,y)):v(b,n,r,y),y=b}for(m=T;m<=L;m++)p=s[m],null!==D[p.key]&&I(n,p)}}}function O(e){e=R(e,this);var t=e.currentTarget,r=t.virtualNode.events[e.type];if(n(r)){for(var i=0,o=r.length;i<o;i++)if(F(r[i],t,e),ce){ce=!1;break}}else F(r,t,e)}function B(){this.defaultPrevented=!0,this.returnValue=!1}function D(){this.cancelBubble=!0}function q(){ce=!0,this.stopPropagation()}function R(e,n){return e||(e=window.event,e.preventDefault||(e.preventDefault=B,e.stopPropagation=D,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=q,e}function F(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){ee.error(r.stack||r)}}function K(e,n,t,r,i,o,a,f){if(n!==e){var l=n.t;if(e.t!==l)v(n,t,r,e,!0);else{var d=e.dom,s=e.c,u=n.c;switch(l){case void 0:var c=i&&o<i.length?i[o]:a;W(e,s,n,u,t,r,c);break;case"#":case"!":s!==u&&(d.nodeValue=u),n.dom=d;break;case"<":s!==u?v(n,t,null,e,!0,f):(n.dom=e.dom,n.domLength=e.domLength);break;default:var m=n.a,g=e.a;if((m&&m.is)!==(g&&g.is))return void v(n,t,r,e,!0);var p=e.ns;p&&(n.ns=p),n.dom=d,u!==s&&$(d,n,p,s,u,!1);var b=n.events,x=e.events;if(m!==g){var y=b&&b.$changed,C=L(d,l,p,m,g,!!y);C&&h(y,"$changed",d,n,"changes",C)}b!==x&&N(d,n,b,x)}}}}function W(e,t,r,i,o,a,l){if(i=f(r,i,t),i!==t){var d,u,v=j(i),h=j(t);if(a&&(r.ns=a),0===v)0===h?d=e.dom:(A(o,t,h),d=s(),c(o,d,l));else{if(0===h)return o.removeChild(e.dom),void k(r,i,o,a,l);if($(o,r,a,t,i,!0,l),i=r.c,n(i)){d=i[0].dom,u=0;for(var m=0,g=i.length;m<g;m++)u+=i[m].domLength||1}else d=i.dom,u=i.domLength}r.dom=d,r.domLength=u}}function z(n){if(!e(n)){var t=n.dom;if(t){var r=n.events;if(r){for(var i in r)M(t,i);var o=r.$destroyed;o&&h(o,"$destroyed",t,n)}t.virtualNode&&(t.virtualNode=void 0)}var a=n.c;a&&G(a,j(a))}}function G(e,n){if(n>1)for(var t=0,r=e.length;t<r;t++)z(e[t]);else 0!==n&&z(l(e,n))}function J(e,n){var t;for(t in e)n[t]=e[t];for(t in n)void 0===e[t]&&(n[t]=void 0)}function Q(e){e&&e!=Y.body&&e!=Y.activeElement&&e.focus()}var U,X,Y=window.document,Z=window.navigator,_=function(){},ee=window.console||{warn:_,error:_},ne=Z.userAgent,te=ne.indexOf("WebKit")!==-1,re=ne.indexOf("Firefox")!==-1,ie=ne.indexOf("Trident")!==-1,oe=Y.createElement("div"),ae="textContent"in Y,fe="addEventListener"in Y,le="createRange"in Y,de="setProperty"in oe.style,se=Y.createElement("p");se.insertAdjacentHTML&&(se.appendChild(Y.createTextNode("a")),se.insertAdjacentHTML("beforeend","b"),U=1===se.childNodes.length,se=Y.createElement("p"),se.appendChild(s()),se.insertAdjacentHTML("beforeend","<b>"),X=3!==se.firstChild.nodeType);var ue="",ce=(le?Y.createRange():null,!1),ve={create:function(e){return e=r(e),v(e),e},append:function(e,n){return n=r(n),v(n,e),n},update:function(e,n){var t=Y.activeElement;return n=r(n,e),K(e,n,e.dom.parentNode),J(n,e),Q(t),e},updateChildren:function(e,n){var t=Y.activeElement,r=e.c;r!==n&&$(e.dom,e,e.ns,r,n,!e.t),Q(t)},remove:function(e){var n=e.dom.parentNode;I(n,e)}};return{vdom:ve}});